{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\multicampus\\\\Desktop\\\\s04p31c103\\\\frontend\\\\node_modules\\\\react-native-calendars\\\\src\\\\expandableCalendar\\\\weekCalendar.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { Map } from 'immutable';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport styleConstructor from \"./style\";\nimport CalendarList from \"../calendar-list\";\nimport Week from \"../expandableCalendar/week\";\nimport asCalendarConsumer from \"./asCalendarConsumer\";\nimport { weekDayNames } from \"../dateutils\";\n\nvar commons = require(\"./commons\");\n\nvar UPDATE_SOURCES = commons.UPDATE_SOURCES;\nvar NUMBER_OF_PAGES = 2;\nvar applyAndroidRtlFix = commons.isAndroid && commons.isRTL;\n\nvar WeekCalendar = function (_Component) {\n  _inherits(WeekCalendar, _Component);\n\n  var _super = _createSuper(WeekCalendar);\n\n  function WeekCalendar(props) {\n    var _this;\n\n    _classCallCheck(this, WeekCalendar);\n\n    _this = _super.call(this, props);\n\n    _this.onDayPress = function (value) {\n      _.invoke(_this.props.context, 'setDate', value.dateString, UPDATE_SOURCES.DAY_PRESS);\n    };\n\n    _this.onScroll = function (_ref) {\n      var x = _ref.nativeEvent.contentOffset.x;\n\n      if (!_this.firstAndroidRTLScrollIgnored) {\n        _this.firstAndroidRTLScrollIgnored = true;\n        return;\n      }\n\n      if (applyAndroidRtlFix) {\n        var numOfPages = _this.state.items.length - 1;\n        var overallWidth = numOfPages * _this.containerWidth;\n        x = overallWidth - x;\n      }\n\n      var newPage = Math.round(x / _this.containerWidth);\n\n      if (_this.page !== newPage) {\n        var items = _this.state.items;\n        _this.page = newPage;\n\n        _.invoke(_this.props.context, 'setDate', items[_this.page], UPDATE_SOURCES.WEEK_SCROLL);\n\n        if (_this.page === items.length - 1) {\n          for (var i = 0; i <= NUMBER_OF_PAGES; i++) {\n            items[i] = items[i + NUMBER_OF_PAGES];\n          }\n\n          _this.setState({\n            items: _toConsumableArray(items)\n          });\n        } else if (_this.page === 0) {\n          for (var _i = items.length - 1; _i >= NUMBER_OF_PAGES; _i--) {\n            items[_i] = items[_i - NUMBER_OF_PAGES];\n          }\n\n          _this.setState({\n            items: _toConsumableArray(items)\n          });\n        }\n      }\n    };\n\n    _this.onMomentumScrollEnd = function () {\n      var items = _this.state.items;\n      var isFirstPage = _this.page === 0;\n      var isLastPage = _this.page === items.length - 1;\n\n      if (isFirstPage || isLastPage) {\n        _this.list.current.scrollToIndex({\n          animated: false,\n          index: NUMBER_OF_PAGES\n        });\n\n        _this.page = NUMBER_OF_PAGES;\n\n        var newWeekArray = _this.getDatesArray();\n\n        if (isLastPage) {\n          for (var i = NUMBER_OF_PAGES + 1; i < items.length; i++) {\n            items[i] = newWeekArray[i];\n          }\n        } else {\n          for (var _i2 = 0; _i2 < NUMBER_OF_PAGES; _i2++) {\n            items[_i2] = newWeekArray[_i2];\n          }\n        }\n\n        setTimeout(function () {\n          _this.setState({\n            items: _toConsumableArray(items)\n          });\n        }, 100);\n      }\n    };\n\n    _this.renderItem = function (_ref2) {\n      var item = _ref2.item;\n\n      var _this$props = _this.props,\n          calendarWidth = _this$props.calendarWidth,\n          style = _this$props.style,\n          onDayPress = _this$props.onDayPress,\n          others = _objectWithoutProperties(_this$props, [\"calendarWidth\", \"style\", \"onDayPress\"]);\n\n      return React.createElement(Week, _extends({}, others, {\n        key: item,\n        current: item,\n        style: [{\n          width: calendarWidth || _this.containerWidth\n        }, style],\n        markedDates: _this.getMarkedDates(),\n        onDayPress: onDayPress || _this.onDayPress,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 7\n        }\n      }));\n    };\n\n    _this.getItemLayout = function (data, index) {\n      return {\n        length: _this.containerWidth,\n        offset: _this.containerWidth * index,\n        index: index\n      };\n    };\n\n    _this.keyExtractor = function (item, index) {\n      return index.toString();\n    };\n\n    _this.style = styleConstructor(props.theme);\n    _this.list = React.createRef();\n    _this.page = NUMBER_OF_PAGES;\n    _this.firstAndroidRTLScrollIgnored = !applyAndroidRtlFix;\n    _this.state = {\n      items: _this.getDatesArray()\n    };\n    return _this;\n  }\n\n  _createClass(WeekCalendar, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props$context = this.props.context,\n          updateSource = _this$props$context.updateSource,\n          date = _this$props$context.date;\n\n      if (date !== prevProps.context.date && updateSource !== UPDATE_SOURCES.WEEK_SCROLL) {\n        this.setState({\n          items: this.getDatesArray()\n        });\n        this.list.current.scrollToIndex({\n          animated: false,\n          index: NUMBER_OF_PAGES\n        });\n      }\n    }\n  }, {\n    key: \"containerWidth\",\n    get: function get() {\n      return this.props.calendarWidth || commons.screenWidth;\n    }\n  }, {\n    key: \"getDatesArray\",\n    value: function getDatesArray() {\n      var array = [];\n\n      for (var index = -NUMBER_OF_PAGES; index <= NUMBER_OF_PAGES; index++) {\n        var d = this.getDate(index);\n        array.push(d);\n      }\n\n      return array;\n    }\n  }, {\n    key: \"getDate\",\n    value: function getDate(weekIndex) {\n      var _this$props2 = this.props,\n          current = _this$props2.current,\n          context = _this$props2.context,\n          firstDay = _this$props2.firstDay;\n      var d = XDate(current || context.date);\n      var dayOfTheWeek = d.getDay();\n\n      if (dayOfTheWeek < firstDay && firstDay > 0) {\n        dayOfTheWeek = 7 + dayOfTheWeek;\n      }\n\n      var dd = weekIndex === 0 ? d : d.addDays(firstDay - dayOfTheWeek);\n      var newDate = dd.addWeeks(weekIndex);\n      return newDate.toString('yyyy-MM-dd');\n    }\n  }, {\n    key: \"getMarkedDates\",\n    value: function getMarkedDates() {\n      var _this$props3 = this.props,\n          context = _this$props3.context,\n          markedDates = _this$props3.markedDates;\n\n      if (markedDates) {\n        var marked = _.cloneDeep(markedDates);\n\n        if (marked[context.date]) {\n          marked[context.date].selected = true;\n        } else {\n          marked[context.date] = {\n            selected: true\n          };\n        }\n\n        return marked;\n      }\n\n      return _defineProperty({}, context.date, {\n        selected: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          allowShadow = _this$props4.allowShadow,\n          firstDay = _this$props4.firstDay,\n          hideDayNames = _this$props4.hideDayNames,\n          current = _this$props4.current,\n          context = _this$props4.context;\n      var items = this.state.items;\n      var weekDaysNames = weekDayNames(firstDay);\n      var extraData = Map({\n        current: current,\n        date: context.date,\n        firstDay: firstDay\n      });\n      return React.createElement(View, {\n        testID: this.props.testID,\n        style: [allowShadow && this.style.containerShadow, !hideDayNames && {\n          paddingBottom: 6\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 7\n        }\n      }, !hideDayNames && React.createElement(View, {\n        style: [this.style.week, {\n          marginTop: 12,\n          marginBottom: -2\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }\n      }, weekDaysNames.map(function (day, idx) {\n        return React.createElement(Text, {\n          allowFontScaling: false,\n          key: idx,\n          style: _this2.style.dayHeader,\n          numberOfLines: 1,\n          accessibilityLabel: '',\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }\n        }, day);\n      })), React.createElement(FlatList, {\n        ref: this.list,\n        data: items,\n        extraData: extraData,\n        style: this.style.container,\n        horizontal: true,\n        showsHorizontalScrollIndicator: false,\n        pagingEnabled: true,\n        scrollEnabled: true,\n        renderItem: this.renderItem,\n        keyExtractor: this.keyExtractor,\n        initialScrollIndex: NUMBER_OF_PAGES,\n        getItemLayout: this.getItemLayout,\n        onScroll: this.onScroll,\n        onMomentumScrollEnd: this.onMomentumScrollEnd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return WeekCalendar;\n}(Component);\n\nWeekCalendar.displayName = 'WeekCalendar';\nWeekCalendar.propTypes = _objectSpread(_objectSpread({}, CalendarList.propTypes), {}, {\n  current: PropTypes.any,\n  allowShadow: PropTypes.bool,\n  hideDayNames: PropTypes.bool\n});\nWeekCalendar.defaultProps = {\n  firstDay: 0,\n  allowShadow: true\n};\nexport default asCalendarConsumer(WeekCalendar);","map":{"version":3,"sources":["C:/Users/multicampus/Desktop/s04p31c103/frontend/node_modules/react-native-calendars/src/expandableCalendar/weekCalendar.js"],"names":["_","React","Component","Map","PropTypes","XDate","styleConstructor","CalendarList","Week","asCalendarConsumer","weekDayNames","commons","require","UPDATE_SOURCES","NUMBER_OF_PAGES","applyAndroidRtlFix","isAndroid","isRTL","WeekCalendar","props","onDayPress","value","invoke","context","dateString","DAY_PRESS","onScroll","x","nativeEvent","contentOffset","firstAndroidRTLScrollIgnored","numOfPages","state","items","length","overallWidth","containerWidth","newPage","Math","round","page","WEEK_SCROLL","i","setState","onMomentumScrollEnd","isFirstPage","isLastPage","list","current","scrollToIndex","animated","index","newWeekArray","getDatesArray","setTimeout","renderItem","item","calendarWidth","style","others","width","getMarkedDates","getItemLayout","data","offset","keyExtractor","toString","theme","createRef","prevProps","updateSource","date","screenWidth","array","d","getDate","push","weekIndex","firstDay","dayOfTheWeek","getDay","dd","addDays","newDate","addWeeks","markedDates","marked","cloneDeep","selected","allowShadow","hideDayNames","weekDaysNames","extraData","testID","containerShadow","paddingBottom","week","marginTop","marginBottom","map","day","idx","dayHeader","container","displayName","propTypes","any","bool","defaultProps"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport React, {Component} from 'react';\nimport {FlatList, View, Text} from 'react-native';\nimport {Map} from 'immutable';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\n\nimport styleConstructor from './style';\nimport CalendarList from '../calendar-list';\nimport Week from '../expandableCalendar/week';\nimport asCalendarConsumer from './asCalendarConsumer';\nimport {weekDayNames} from '../dateutils';\n\nconst commons = require('./commons');\nconst UPDATE_SOURCES = commons.UPDATE_SOURCES;\nconst NUMBER_OF_PAGES = 2; // must be a positive number\nconst applyAndroidRtlFix = commons.isAndroid && commons.isRTL;\n\n/**\n * @description: Week calendar component\n * @note: Should be wrapped with 'CalendarProvider'\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nclass WeekCalendar extends Component {\n  static displayName = 'WeekCalendar';\n\n  static propTypes = {\n    ...CalendarList.propTypes,\n    /** the current date */\n    current: PropTypes.any,\n    /** whether to have shadow/elevation for the calendar */\n    allowShadow: PropTypes.bool,\n    /** whether to hide the names of the week days */\n    hideDayNames: PropTypes.bool\n  };\n\n  static defaultProps = {\n    firstDay: 0,\n    allowShadow: true\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.style = styleConstructor(props.theme);\n\n    this.list = React.createRef();\n    this.page = NUMBER_OF_PAGES;\n    // On Android+RTL there's an initial scroll that cause issues\n    this.firstAndroidRTLScrollIgnored = !applyAndroidRtlFix;\n\n    this.state = {\n      items: this.getDatesArray()\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const {updateSource, date} = this.props.context;\n\n    if (date !== prevProps.context.date && updateSource !== UPDATE_SOURCES.WEEK_SCROLL) {\n      this.setState({items: this.getDatesArray()});\n      this.list.current.scrollToIndex({animated: false, index: NUMBER_OF_PAGES});\n    }\n  }\n\n  get containerWidth() {\n    return this.props.calendarWidth || commons.screenWidth;\n  }\n\n  getDatesArray() {\n    const array = [];\n    for (let index = -NUMBER_OF_PAGES; index <= NUMBER_OF_PAGES; index++) {\n      const d = this.getDate(index);\n      array.push(d);\n    }\n    return array;\n  }\n\n  getDate(weekIndex) {\n    const {current, context, firstDay} = this.props;\n    const d = XDate(current || context.date);\n    // get the first day of the week as date (for the on scroll mark)\n    let dayOfTheWeek = d.getDay();\n    if (dayOfTheWeek < firstDay && firstDay > 0) {\n      dayOfTheWeek = 7 + dayOfTheWeek;\n    }\n\n    // leave the current date in the visible week as is\n    const dd = weekIndex === 0 ? d : d.addDays(firstDay - dayOfTheWeek);\n    const newDate = dd.addWeeks(weekIndex);\n    return newDate.toString('yyyy-MM-dd');\n  }\n\n  getMarkedDates() {\n    const {context, markedDates} = this.props;\n\n    if (markedDates) {\n      const marked = _.cloneDeep(markedDates);\n\n      if (marked[context.date]) {\n        marked[context.date].selected = true;\n      } else {\n        marked[context.date] = {selected: true};\n      }\n      return marked;\n    }\n    return {[context.date]: {selected: true}};\n  }\n\n  onDayPress = value => {\n    _.invoke(this.props.context, 'setDate', value.dateString, UPDATE_SOURCES.DAY_PRESS);\n  };\n\n  onScroll = ({\n    nativeEvent: {\n      contentOffset: {x}\n    }\n  }) => {\n    if (!this.firstAndroidRTLScrollIgnored) {\n      this.firstAndroidRTLScrollIgnored = true;\n      return;\n    }\n\n    // Fix reversed offset on Android+RTL\n    if (applyAndroidRtlFix) {\n      const numOfPages = this.state.items.length - 1;\n      const overallWidth = numOfPages * this.containerWidth;\n      x = overallWidth - x;\n    }\n\n    const newPage = Math.round(x / this.containerWidth);\n\n    if (this.page !== newPage) {\n      const {items} = this.state;\n      this.page = newPage;\n\n      _.invoke(this.props.context, 'setDate', items[this.page], UPDATE_SOURCES.WEEK_SCROLL);\n\n      if (this.page === items.length - 1) {\n        for (let i = 0; i <= NUMBER_OF_PAGES; i++) {\n          items[i] = items[i + NUMBER_OF_PAGES];\n        }\n        this.setState({items: [...items]});\n      } else if (this.page === 0) {\n        for (let i = items.length - 1; i >= NUMBER_OF_PAGES; i--) {\n          items[i] = items[i - NUMBER_OF_PAGES];\n        }\n        this.setState({items: [...items]});\n      }\n    }\n  };\n\n  onMomentumScrollEnd = () => {\n    const {items} = this.state;\n    const isFirstPage = this.page === 0;\n    const isLastPage = this.page === items.length - 1;\n\n    if (isFirstPage || isLastPage) {\n      this.list.current.scrollToIndex({animated: false, index: NUMBER_OF_PAGES});\n      this.page = NUMBER_OF_PAGES;\n      const newWeekArray = this.getDatesArray();\n\n      if (isLastPage) {\n        for (let i = NUMBER_OF_PAGES + 1; i < items.length; i++) {\n          items[i] = newWeekArray[i];\n        }\n      } else {\n        for (let i = 0; i < NUMBER_OF_PAGES; i++) {\n          items[i] = newWeekArray[i];\n        }\n      }\n\n      setTimeout(() => {\n        this.setState({items: [...items]});\n      }, 100);\n    }\n  };\n\n  renderItem = ({item}) => {\n    const {calendarWidth, style, onDayPress, ...others} = this.props;\n\n    return (\n      <Week\n        {...others}\n        key={item}\n        current={item}\n        style={[{width: calendarWidth || this.containerWidth}, style]}\n        markedDates={this.getMarkedDates()}\n        onDayPress={onDayPress || this.onDayPress}\n      />\n    );\n  };\n\n  getItemLayout = (data, index) => {\n    return {\n      length: this.containerWidth,\n      offset: this.containerWidth * index,\n      index\n    };\n  };\n\n  keyExtractor = (item, index) => index.toString();\n\n  render() {\n    const {allowShadow, firstDay, hideDayNames, current, context} = this.props;\n    const {items} = this.state;\n    let weekDaysNames = weekDayNames(firstDay);\n    const extraData = Map({\n      current,\n      date: context.date,\n      firstDay\n    });\n    return (\n      <View\n        testID={this.props.testID}\n        style={[allowShadow && this.style.containerShadow, !hideDayNames && {paddingBottom: 6}]}\n      >\n        {!hideDayNames && (\n          <View style={[this.style.week, {marginTop: 12, marginBottom: -2}]}>\n            {/* {this.props.weekNumbers && <Text allowFontScaling={false} style={this.style.dayHeader}></Text>} */}\n            {weekDaysNames.map((day, idx) => (\n              <Text\n                allowFontScaling={false}\n                key={idx}\n                style={this.style.dayHeader}\n                numberOfLines={1}\n                accessibilityLabel={''}\n                // accessible={false} // not working\n                // importantForAccessibility='no'\n              >\n                {day}\n              </Text>\n            ))}\n          </View>\n        )}\n        <FlatList\n          ref={this.list}\n          data={items}\n          extraData={extraData}\n          style={this.style.container}\n          horizontal\n          showsHorizontalScrollIndicator={false}\n          pagingEnabled\n          scrollEnabled\n          renderItem={this.renderItem}\n          keyExtractor={this.keyExtractor}\n          initialScrollIndex={NUMBER_OF_PAGES}\n          getItemLayout={this.getItemLayout}\n          onScroll={this.onScroll}\n          onMomentumScrollEnd={this.onMomentumScrollEnd}\n        />\n      </View>\n    );\n  }\n}\n\nexport default asCalendarConsumer(WeekCalendar);\n"]},"metadata":{},"sourceType":"module"}